{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46121082-abdd5301ce27c2765f644588b';\nconst BASE_URL = 'https://pixabay.com/api/';\n\n/**\n * Функція для отримання зображень з Pixabay API\n * @param {string} query - Ключове слово для пошуку\n * @param {number} page - Номер сторінки для пагінації\n * @param {number} perPage - Кількість зображень на сторінку\n * @returns {Promise<Object>} - Відповідь API\n */\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    throw error; \n  }\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet page = 1;\nconst perPage = 15;\nlet searchQuery = '';\nlet lightbox = null;\n\nconst searchForm = document.getElementById('search-form');\nconst gallery = document.getElementById('gallery');\nconst loadMoreBtn = document.getElementById('load-more');\nconst loader = document.getElementById('loader');\nconst endMessage = document.getElementById('end-message');\n\nfunction initializeLightbox() {\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery-item a', { /* опції за бажанням */ });\n  }\n}\n\nfunction renderImages(images) {\n  const markup = images.map(image => `\n    <div class=\"gallery-item\">\n      <a href=\"${image.largeImageURL}\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n      </a>\n    </div>\n  `).join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  initializeLightbox();\n}\n\nfunction clearGallery() {\n  gallery.innerHTML = '';\n}\n\nfunction showLoadMoreBtn() {\n  loadMoreBtn.classList.remove('hidden');\n}\n\nfunction hideLoadMoreBtn() {\n  loadMoreBtn.classList.add('hidden');\n}\n\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\nfunction showEndMessage(message = \"We're sorry, but you've reached the end of search results.\") {\n  endMessage.textContent = message;\n  endMessage.classList.remove('hidden');\n}\n\nfunction hideEndMessage() {\n  endMessage.classList.add('hidden');\n}\n\nfunction scrollPage() {\n  const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n  \n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction checkEndOfResults(data) {\n  if (page * perPage >= data.totalHits) {\n    hideLoadMoreBtn();\n    showEndMessage();\n  } else {\n    showLoadMoreBtn();\n  }\n}\n\nasync function onSearchSubmit(e) {\n  e.preventDefault();\n  searchQuery = e.currentTarget.elements.query.value.trim();\n  \n  if (!searchQuery) return;\n\n  page = 1;\n  hideEndMessage();\n  clearGallery();\n  hideLoadMoreBtn();\n  showLoader();\n\n  try {\n    const data = await fetchImages(searchQuery, page, perPage);\n    if (data.hits.length === 0) {\n      showEndMessage(\"No images found. Please try a different search term.\");\n      return;\n    }\n    renderImages(data.hits);\n    checkEndOfResults(data);\n  } catch (error) {\n    showEndMessage(\"An error occurred while fetching images. Please try again later.\");\n  } finally {\n    hideLoader();\n  }\n}\n\nasync function loadMoreImages() {\n  page += 1;\n  showLoader();\n\n  try {\n    const data = await fetchImages(searchQuery, page, perPage);\n    renderImages(data.hits);\n    scrollPage();\n    checkEndOfResults(data);\n  } catch (error) {\n    showEndMessage(\"An error occurred while fetching images. Please try again later.\");\n  } finally {\n    hideLoader();\n  }\n}\n\nsearchForm.addEventListener('submit', onSearchSubmit);\nloadMoreBtn.addEventListener('click', loadMoreImages);\n\nhideLoadMoreBtn();\nhideEndMessage();\n\n\n\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","searchQuery","lightbox","searchForm","gallery","loadMoreBtn","loader","endMessage","initializeLightbox","SimpleLightbox","renderImages","images","markup","image","clearGallery","showLoadMoreBtn","hideLoadMoreBtn","showLoader","hideLoader","showEndMessage","message","hideEndMessage","scrollPage","cardHeight","checkEndOfResults","data","onSearchSubmit","loadMoreImages"],"mappings":"6vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BASV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACX,CACP,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,uBAAwBA,CAAK,EACrCA,CACP,CACH,CC1BA,IAAIH,EAAO,EACX,MAAMC,EAAU,GAChB,IAAIG,EAAc,GACdC,EAAW,KAEf,MAAMC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAc,SAAS,eAAe,WAAW,EACjDC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAa,SAAS,eAAe,aAAa,EAExD,SAASC,GAAqB,CACxBN,EACFA,EAAS,QAAO,EAEhBA,EAAW,IAAIO,EAAe,kBAAmB,CAA2B,CAAA,CAEhF,CAEA,SAASC,EAAaC,EAAQ,CAC5B,MAAMC,EAASD,EAAO,IAAIE,GAAS;AAAA;AAAA,iBAEpBA,EAAM,aAAa;AAAA,oBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,GAGvD,EAAE,KAAK,EAAE,EACVT,EAAQ,mBAAmB,YAAaQ,CAAM,EAC9CJ,GACF,CAEA,SAASM,GAAe,CACtBV,EAAQ,UAAY,EACtB,CAEA,SAASW,GAAkB,CACzBV,EAAY,UAAU,OAAO,QAAQ,CACvC,CAEA,SAASW,GAAkB,CACzBX,EAAY,UAAU,IAAI,QAAQ,CACpC,CAEA,SAASY,GAAa,CACpBX,EAAO,UAAU,OAAO,QAAQ,CAClC,CAEA,SAASY,GAAa,CACpBZ,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEA,SAASa,EAAeC,EAAU,6DAA8D,CAC9Fb,EAAW,YAAca,EACzBb,EAAW,UAAU,OAAO,QAAQ,CACtC,CAEA,SAASc,GAAiB,CACxBd,EAAW,UAAU,IAAI,QAAQ,CACnC,CAEA,SAASe,GAAa,CACpB,KAAM,CAAE,OAAQC,CAAU,EAAKnB,EAAQ,kBAAkB,wBAEzD,OAAO,SAAS,CACd,IAAKmB,EAAa,EAClB,SAAU,QACd,CAAG,CACH,CAEA,SAASC,EAAkBC,EAAM,CAC3B5B,EAAOC,GAAW2B,EAAK,WACzBT,IACAG,KAEAJ,GAEJ,CAEA,eAAeW,EAAe,EAAG,CAI/B,GAHA,EAAE,eAAc,EAChBzB,EAAc,EAAE,cAAc,SAAS,MAAM,MAAM,OAE/C,EAACA,EAEL,CAAAJ,EAAO,EACPwB,IACAP,IACAE,IACAC,IAEA,GAAI,CACF,MAAMQ,EAAO,MAAM9B,EAAYM,EAAaJ,EAAMC,CAAO,EACzD,GAAI2B,EAAK,KAAK,SAAW,EAAG,CAC1BN,EAAe,sDAAsD,EACrE,MACD,CACDT,EAAae,EAAK,IAAI,EACtBD,EAAkBC,CAAI,CACvB,MAAe,CACdN,EAAe,kEAAkE,CACrF,QAAY,CACRD,GACD,EACH,CAEA,eAAeS,GAAiB,CAC9B9B,GAAQ,EACRoB,IAEA,GAAI,CACF,MAAMQ,EAAO,MAAM9B,EAAYM,EAAaJ,EAAMC,CAAO,EACzDY,EAAae,EAAK,IAAI,EACtBH,IACAE,EAAkBC,CAAI,CACvB,MAAe,CACdN,EAAe,kEAAkE,CACrF,QAAY,CACRD,GACD,CACH,CAEAf,EAAW,iBAAiB,SAAUuB,CAAc,EACpDrB,EAAY,iBAAiB,QAASsB,CAAc,EAEpDX,IACAK,EAAgB"}