{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46121082-abdd5301ce27c2765f644588b';\nconst BASE_URL = 'https://pixabay.com/api/';\nlet currentPage = 1;\nconst perPage = 15;\n\nexport const getImages = async (query) => {\n  const response = await axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currentPage,\n      per_page: perPage,\n    },\n  });\n\n  const { hits, totalHits } = response.data;\n  currentPage++;\n  return { hits, totalHits };\n};\n\n// Скидання сторінки для нового пошуку\nexport const resetPage = () => {\n  currentPage = 1;\n};","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// Очищення галереї\nexport const clearGallery = () => {\n  const gallery = document.querySelector('#gallery');\n  gallery.innerHTML = '';\n};\n\n// Відображення зображень у галереї\nexport const renderGallery = (images) => {\n  const gallery = document.querySelector('#gallery');\n  const markup = images.map(({ webformatURL, largeImageURL, tags }) => `\n    <div class=\"gallery-item\">\n      <a href=\"${largeImageURL}\" class=\"gallery-link\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      </a>\n    </div>\n  `).join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n};\n\n\n\n\n\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImages, resetPage } from './js/pixabay-api.js';\nimport { renderGallery, clearGallery } from './js/render-functions.js';\n\n\nconst searchForm = document.querySelector('#search-form');\nconst loadMoreBtn = document.querySelector('#loadMore');\nconst loader = document.querySelector('#loader');\nconst notification = document.querySelector('#notification');\n\nlet query = '';\nlet lightbox = new SimpleLightbox('.gallery-item a');\n\n// Функція показу лоадера\nconst showLoader = () => {\n  loader.style.display = 'block';\n};\n\n// Функція приховування лоадера\nconst hideLoader = () => {\n  loader.style.display = 'none';\n};\n\n// Функція показу кнопки \"Load More\"\nconst showLoadMoreBtn = () => {\n  loadMoreBtn.style.display = 'block';\n};\n\n// Функція приховування кнопки \"Load More\"\nconst hideLoadMoreBtn = () => {\n  loadMoreBtn.style.display = 'none';\n};\n\n// Пошук зображень\nconst searchImages = async () => {\n  showLoader();\n  try {\n    const { hits, totalHits } = await getImages(query);\n    if (hits.length === 0) {\n      notification.textContent = 'Нічого не знайдено за вашим запитом.';\n      return;\n    }\n    renderGallery(hits);\n\n    // Оновлення SimpleLightbox після рендерингу нових зображень\n    lightbox.refresh();\n    \n    if (document.querySelector('#gallery').childElementCount >= totalHits) {\n      hideLoadMoreBtn();\n      notification.textContent = \"We're sorry, but you've reached the end of search results.\";\n    } else {\n      showLoadMoreBtn();\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    notification.textContent = 'Сталася помилка. Спробуйте ще раз.';\n    clearGallery();\n  } finally {\n    hideLoader();\n  }\n};\n\n// Обробка форми пошуку\nsearchForm.addEventListener('submit', (e) => {\n  e.preventDefault();\n  query = e.target.elements.query.value.trim();\n  if (!query) return;\n\n  clearGallery();\n  resetPage();\n  hideLoadMoreBtn();\n  searchImages();\n});\n\n// Натискання на кнопку \"Load More\"\nloadMoreBtn.addEventListener('click', () => {\n  searchImages();\n});"],"names":["API_KEY","BASE_URL","currentPage","perPage","getImages","query","response","axios","hits","totalHits","resetPage","clearGallery","gallery","renderGallery","images","markup","webformatURL","largeImageURL","tags","searchForm","loadMoreBtn","loader","notification","lightbox","showLoader","hideLoader","showLoadMoreBtn","hideLoadMoreBtn","searchImages","error","e"],"mappings":"svBAEA,MAAMA,EAAU,qCACVC,EAAW,2BACjB,IAAIC,EAAc,EAClB,MAAMC,EAAU,GAEHC,EAAY,MAAOC,GAAU,CACxC,MAAMC,EAAW,MAAMC,EAAM,IAAIN,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGK,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMH,EACN,SAAUC,CACX,CACL,CAAG,EAEK,CAAE,KAAAK,EAAM,UAAAC,GAAcH,EAAS,KACrC,OAAAJ,IACO,CAAE,KAAAM,EAAM,UAAAC,EACjB,EAGaC,EAAY,IAAM,CAC7BR,EAAc,CAChB,ECxBaS,EAAe,IAAM,CAChC,MAAMC,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,UAAY,EACtB,EAGaC,EAAiBC,GAAW,CACvC,MAAMF,EAAU,SAAS,cAAc,UAAU,EAC3CG,EAASD,EAAO,IAAI,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,CAAI,IAAO;AAAA;AAAA,iBAEtDD,CAAa;AAAA,oBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,GAG3C,EAAE,KAAK,EAAE,EACVN,EAAQ,mBAAmB,YAAaG,CAAM,CAChD,ECdMI,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,WAAW,EAChDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAe,SAAS,cAAc,eAAe,EAE3D,IAAIjB,EAAQ,GACRkB,EAAW,IAAI,eAAe,iBAAiB,EAGnD,MAAMC,EAAa,IAAM,CACvBH,EAAO,MAAM,QAAU,OACzB,EAGMI,EAAa,IAAM,CACvBJ,EAAO,MAAM,QAAU,MACzB,EAGMK,EAAkB,IAAM,CAC5BN,EAAY,MAAM,QAAU,OAC9B,EAGMO,EAAkB,IAAM,CAC5BP,EAAY,MAAM,QAAU,MAC9B,EAGMQ,EAAe,SAAY,CAC/BJ,IACA,GAAI,CACF,KAAM,CAAE,KAAAhB,EAAM,UAAAC,CAAS,EAAK,MAAML,EAAUC,CAAK,EACjD,GAAIG,EAAK,SAAW,EAAG,CACrBc,EAAa,YAAc,uCAC3B,MACD,CACDT,EAAcL,CAAI,EAGlBe,EAAS,QAAO,EAEZ,SAAS,cAAc,UAAU,EAAE,mBAAqBd,GAC1DkB,IACAL,EAAa,YAAc,8DAE3BI,GAEH,OAAQG,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CP,EAAa,YAAc,qCAC3BX,GACJ,QAAY,CACRc,GACD,CACH,EAGAN,EAAW,iBAAiB,SAAWW,GAAM,CAC3CA,EAAE,eAAc,EAChBzB,EAAQyB,EAAE,OAAO,SAAS,MAAM,MAAM,OACjCzB,IAELM,IACAD,IACAiB,IACAC,IACF,CAAC,EAGDR,EAAY,iBAAiB,QAAS,IAAM,CAC1CQ,GACF,CAAC"}